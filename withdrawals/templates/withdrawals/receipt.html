{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Withdrawal Receipt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f1f3f6;
            font-family: "Segoe UI", sans-serif;
        }

        .receipt-wrapper {
            max-width: 850px;
            margin: 50px auto;
            background: #ffffff;
            border-radius: 12px;
            padding: 45px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.05);
        }

        .company-header {
            border-bottom: 2px solid #000;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .company-logo {
            height: 55px;
        }

        .receipt-badge {
            background: #000;
            color: #fff;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 0.85rem;
        }

        .section-title {
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
            color: #555;
            margin-bottom: 10px;
        }

        .table td {
            padding: 8px 0;
        }

        .amount-highlight {
            font-size: 1.3rem;
            font-weight: 700;
            color: #198754;
        }

        .receipt-footer {
            border-top: 1px solid #eaeaea;
            margin-top: 35px;
            padding-top: 20px;
            font-size: 0.85rem;
            color: #777;
        }

        .print-btn {
            position: absolute;
            right: 0;
            top: 0;
        }

        @media print {
            body {
                background: #fff;
            }
            .no-print {
                display: none !important;
            }
            .receipt-wrapper {
                box-shadow: none;
                margin: 0;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>

<div class="receipt-wrapper position-relative">

    <!-- Print Button -->
    <div class="no-print print-btn">
        <button onclick="window.print()" class="btn btn-dark btn-sm px-4">
            Print
        </button>
    </div>

    <!-- Company Header -->
    <div class="company-header d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center gap-3">
            <!-- Replace with your actual logo path -->
            <img src="{% static 'images/logo.png' %}" class="company-logo" alt="Logo">
            <div>
                <h4 class="fw-bold mb-0">RiazVest Capital Investment</h4>
                <small class="text-muted">Official Withdrawal Receipt</small>
            </div>
        </div>
        <div class="text-end">
            <div class="receipt-badge">
                {{ withdrawal.receipt_number }}
            </div>
            <small class="d-block mt-2 text-muted">
                Approved:
                {% if withdrawal.approved_at %}
                    {{ withdrawal.approved_at|date:"M d, Y H:i" }}
                {% else %}
                    -
                {% endif %}
            </small>
        </div>
    </div>

    <!-- Client Info -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="section-title">Client Information</div>
            <p class="mb-1"><strong>Name:</strong> {{ withdrawal.user.get_full_name|default:withdrawal.user.username }}</p>
            <p class="mb-1"><strong>Username:</strong> {{ withdrawal.user.username }}</p>
            <p class="mb-0"><strong>Email:</strong> {{ withdrawal.user.email }}</p>
        </div>

        <div class="col-md-6 text-md-end mt-4 mt-md-0">
            <div class="section-title">Transaction Info</div>
            <p class="mb-1"><strong>Withdrawal ID:</strong> #{{ withdrawal.id }}</p>
            <p class="mb-1"><strong>Requested:</strong> {{ withdrawal.created_at|date:"M d, Y H:i" }}</p>
            <p class="mb-0"><strong>Status:</strong> <span class="badge bg-success">Approved</span></p>
        </div>
    </div>

    <!-- Investment Details -->
    <div class="mb-4">
        <div class="section-title">Investment Details</div>
        <table class="table table-borderless">
            <tr>
                <td>Investment Plan</td>
                <td class="text-end fw-semibold">{{ withdrawal.investment.investment_plan.name }}</td>
            </tr>
            <tr>
                <td>Reference Token</td>
                <td class="text-end">{{ withdrawal.investment.ref_token }}</td>
            </tr>
            <tr>
                <td>Payment Method</td>
                <td class="text-end">{{ withdrawal.payment_option|upper }}</td>
            </tr>
        </table>
    </div>

    <!-- Financial Breakdown -->
    <div>
        <div class="section-title">Financial Breakdown</div>
        <table class="table table-borderless">
            <tr>
                <td>Withdrawal Amount</td>
                <td class="text-end">${{ withdrawal.amount }}</td>
            </tr>
            <tr>
                <td>Processing Fee</td>
                <td class="text-end">$0.00</td>
            </tr>
            <tr>
                <td class="fw-bold">Net Paid</td>
                <td class="text-end amount-highlight">${{ withdrawal.amount }}</td>
            </tr>
        </table>
    </div>

    <!-- Footer -->
    <div class="receipt-footer text-center">
        <p>This document serves as official confirmation of the completed withdrawal transaction.</p>
        <p>Generated electronically and does not require a physical signature.</p>
        <!-- <p>Support: support@riazvest.com</p> -->
    </div>

</div>

</body>
</html>