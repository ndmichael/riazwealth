{% load static %}
{% load crispy_forms_tags %}

<section>
    <div class="container">
        <section class="row gy-5 py-4">
            <div class="col-12">
                <h3> Admin / Notifications </h3>
            </div>
        </section>

        <section class="row gy-5">
            <div class="col-12 col-md-7">
                <form 
                    class="mt-4 mb-5 p-5 border rounded-3" 
                    action="" 
                    method="post"
                    style="background: rgba(114, 255, 131, 0.4);"
                >
                    {% crispy general_news_form %}
                    <button 
                        type="submit"
                        class="btn btn-lg btn-success fw-bolder col-12"
                        style="font-size: 12px !important; "
                    >
                        SEND NEWS
                    </button>
                </form>   
            </div>
        </section>

        <section class="row gy-5 py-4">
            <article class="col-12 mx-auto">
                <div>
                    <table 
                    class="
                        table
                        animate__animated
                        animate__fadeInUp
                        animate_slow
                    ">
                    <thead>
                        <tr>
                            <th scope="col">S.NO</th>
                            <th scope="col">Title</th>
                            <th scope="col">Message</th>
                            <th scope="col">Date Sent</th>

                        </tr>
                    </thead>
                    <tbody>
                        {% for notification in notifications %}

                        <tr>
                            <td>   
                                {{forloop.counter}}
                            </td>
                            <td class="fw-bolder">
                                <a href="#">
                                    <b>{{notification.title}}</b>
                                </a>                                   
                            </td>
                            <td>
                                {{notification.message | truncatechars:40}}
                            </td>
                            <td>
                                <span>{{notification.created_at}}</span> 
                            </td>

                            
                        </tr>
                        {% empty %}
                        <tr>
                            <h4 class="alert alert-info">No General Messages</h4>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                </div>
            </article>
        </section>
    </div>
</section>